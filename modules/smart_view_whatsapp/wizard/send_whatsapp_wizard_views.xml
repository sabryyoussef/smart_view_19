<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Send WhatsApp Wizard Form -->
    <record id="send_whatsapp_wizard_form" model="ir.ui.view">
        <field name="name">send.whatsapp.wizard.form</field>
        <field name="model">send.whatsapp.wizard</field>
        <field name="arch" type="xml">
            <form string="Send Quotation via WhatsApp">
                <sheet>
                    <div class="alert alert-success" role="alert" invisible="not mobile_valid">
                        <i class="fa fa-check-circle"/> 
                        <strong>Ready to send!</strong> Mobile number is valid.
                    </div>
                    <div class="alert alert-warning" role="alert" invisible="mobile_valid">
                        <i class="fa fa-exclamation-triangle"/> 
                        <strong>Invalid mobile number!</strong> Please check the number.
                    </div>
                    
                    <group>
                        <group>
                            <field name="sale_order_id" readonly="1"/>
                            <field name="partner_id" readonly="1"/>
                            <field name="mobile" placeholder="+20 1234567890"/>
                            <field name="mobile_valid" invisible="1"/>
                        </group>
                        <group>
                            <field name="whatsapp_instance_id" 
                                   options="{'no_create': True, 'no_open': True}"/>
                            <field name="message_type"/>
                            <field name="attach_pdf"/>
                        </group>
                    </group>
                    
                    <group invisible="not use_template or message_type == 'custom'">
                        <field name="use_template"/>
                        <field name="template_id" 
                               invisible="not use_template"
                               options="{'no_create': True}"/>
                    </group>
                    
                    <group string="Message">
                        <field name="message" 
                               widget="text" 
                               nolabel="1"
                               placeholder="Enter your WhatsApp message here..."/>
                    </group>
                    
                    <div class="alert alert-info" role="alert">
                        <i class="fa fa-info-circle"/> 
                        <strong>Tip:</strong> 
                        <ul class="mb-0">
                            <li>For Meta (Facebook) WhatsApp, use approved templates</li>
                            <li>For 1msg/Gupshup, you can send custom messages</li>
                            <li>PDF attachment will be sent separately after the message</li>
                        </ul>
                    </div>
                </sheet>
                <footer>
                    <button name="action_send_whatsapp" 
                            string="Send via WhatsApp" 
                            type="object" 
                            class="btn-primary"
                            icon="fa-whatsapp"/>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <!-- Action -->
    <record id="action_send_whatsapp_wizard" model="ir.actions.act_window">
        <field name="name">Send Quotation via WhatsApp</field>
        <field name="res_model">send.whatsapp.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>

</odoo>

